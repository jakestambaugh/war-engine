<!-- https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_client_applications -->
<html>

<head>
  <title>War</title>
</head>

<body>
  <div id="graphic">
    <p id="a-card"></p>
    <p id="b-card"></p>
  </div>
  <div id="messages">
    <button id="nexter">Next</button>
    <h2>Game Log</h2>
  </div>
</body>
<script>
  window.onload = function () {
    let messageDiv = document.getElementById("messages");
    websocket = new WebSocket("ws://localhost:3000/connect");
    websocket.onmessage = function (event) {
      const para = createNewLogLine(event.data);
      const parsed = parseMessageFromServer(event.data);
      messageDiv.appendChild(para);
    };

    websocket.onopen = function (event) {
      const nexter = document.getElementById("nexter");
      nexter.onclick = function () {
        websocket.send("Hello, websocket!");
      };
    };
  };

  function createNewLogLine(data) {
    const para = document.createElement("p");
    const node = document.createTextNode(event.data);
    para.appendChild(node);
    return para;
  }

  function parseMessageFromServer(data) {
    let parsed = JSON.parse(data);
    console.log(parsed);
    return parsed;
  }
</script>

</html>